<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="Comment" >
	<select id="getComment" parameterType="_int" resultType="fulldto">

<!-- 			SELECT	* -->
<!-- 			FROM USER_TEST ut  -->
<!-- 			INNER JOIN BOARD_TEST bt ON ut.USER_NUM = bt.USER_NUM  -->
<!-- 			INNER JOIN MOVIE_TEST mt ON bt.MOVIE_ID = mt.MOVIE_ID  -->
<!-- 			INNER JOIN COMMENT_TEST ct ON ct.BOARD_NUM = bt.BOARD_NUM  -->
<!-- 			WHERE bt.BOARD_NUM = #{board_num} -->
<!-- 			AND  -->
<!-- 			mt.MOVIE_ID = #{movie_id} -->

				<!-- comment_detail의 원래 댓글 -->
				SELECT	ut.USER_ID ,
						bt.BOARD_DATE ,
						bt.BOARD_CONTENT ,
						bt.BOARD_LIKE ,
						mt.MOVIE_TITLE ,
						(SELECT COUNT(*) 
						FROM COMMENT_TEST ct
						INNER JOIN BOARD_TEST bt ON ct.BOARD_NUM = bt.BOARD_NUM 
						WHERE bt.BOARD_NUM = #{board_num})
						FROM USER_TEST ut 
				INNER JOIN BOARD_TEST bt ON ut.USER_NUM = bt.USER_NUM 
				INNER JOIN MOVIE_TEST mt ON bt.MOVIE_ID = mt.MOVIE_ID 
				WHERE bt.BOARD_NUM = #{board_num}
				AND 
				mt.MOVIE_ID = #{movie_id}
	</select>
	<select id="">
		<!-- comment_detail의 대댓글 -->
		SELECT 	ct.USER_ID ,
		ct.COMMENT_CONTENT ,
		ct.COMMENT_LIKE ,
		ct.COMMENT_DATE 
		FROM USER_TEST ut 
		INNER JOIN BOARD_TEST bt ON ut.USER_NUM = bt.USER_NUM 
		INNER JOIN COMMENT_TEST ct ON ut.USER_NUM = ct.USER_NUM
		WHERE bt.BOARD_NUM = 3
		AND ct.USER_NUM = 3
	</select>
	
	
	
	
	
	

</mapper>